<div data-ng-controller="mapViewCtrl">
    <timeline data-ng-show="vm.$mapService.timelineVisible" style="height: 20px;"></timeline>
    <div class="rightpanel" style="background-color: transparent; ">
        <div id="rightpanelTabContainer" class="tabbable tabs-left" style="position:relative;height:100%;padding:0px">
            <!-- Nav tabs -->
            <!--<div id="rightPanelToggle">
                    <i class="fa fa-2x fa-chevron-right" style="margin-left: 10px;margin-top: 108px;"></i>
                </div>-->

            <ul id="rightpanelTabs" class="nav nav-tabs" style="margin-right:0px; margin-top:100px; display:inline-block">
                <li class="rightPanelTab rightPanelTabAnimated active" ng-show="featureSelected"><a href="#info" style="" data-toggle="tab"><span class="fa fa-info fa-lg"></span></a></li>
            </ul>
            <div id="rightpanelTabPanes" class="tab-content" style="display: inline-block; height:100%; background-color: white;">
                <div class="tab-pane active" id="info">
                    <featureprops class="rightpanel-content"></featureprops>
                </div>
            </div>
        </div>
    </div>

    <script>
        $('#rightpanelTabs a').click(function (e) {
            var tab = $(this);
            if (tab.parent('li').hasClass('tab-toggle')) {
                var foo = $("#rightpanelTabPanes").children(".tab-pane");
                if (foo.hasClass('active')) {
                    foo.removeClass('active');
                } else {
                    foo.addClass('active');
                }

            }
            if (tab.parent('li').hasClass('active')) {
                window.setTimeout(function () {
                    var foo = $("#rightpanelTabPanes").children(".tab-pane");
                    foo.removeClass('active');
                    tab.parent('li').removeClass('active');
                    $('.leaflet-control-zoom').css('visibility', 'visible');
                    $('.leaflet-control-locate').css('visibility', 'visible');
                }, 1);
            } else {
                $('.leaflet-control-zoom').css('visibility', 'hidden');
                $('.leaflet-control-locate').css('visibility', 'hidden');
            }
        });
    </script>

    <div class="leftpanel" ng-cloak style="pointer-events: all">
        <div class="col-xs-3 leftpanel-tab">
            <!-- required for floating -->
            <!-- Nav tabs -->
            <ul class="nav nav-tabs tabs-left" id="leftPanelTab">
                <!-- 'tabs-right' for right tabs -->
                <li><a href="#basestyles" data-toggle="tab" data-ng-if="vm.isIntermediate"><div class="mapIcon"></div></a></li>
                <li class="active"><a href="#layers" data-toggle="tab"><div class="layersIcon"></div></a></li>
                <li><a href="#filters" data-toggle="tab"><div class="filtersIcon"></div></a></li>
                <li><a href="#styles" data-toggle="tab"><div class="stylesIcon"></div></a></li>
                <li><a href="#mca" data-toggle="tab" data-ng-if="vm.isExpert"><div class="mcaIcon"></div></a></li>
                <li><a href="#heatmap" data-toggle="tab"><div class="heatmapIcon"></div></a></li>
                <li><a href="#features" data-toggle="tab"><div class="featuresIcon"></div></a></li>
                <li><a href="#legend" data-toggle="tab"><div class="mainLegendIcon"></div></a></li>
                <li><a href="#settings" data-toggle="tab"><i class="fa fa-gear fa-2x" style="color: black"></i></a></li>
            </ul>
        </div>

        <div class="col-xs-9 leftpanel-content">
            <!-- Tab panes -->
            <div class="tab-content">
                <base-map-list class="tab-pane" id="basestyles"></base-map-list>

                <layers-directive class="tab-pane active" id="layers"></layers-directive>

                <filter-list class="tab-pane" id="filters"></filter-list>

                <style-list class="tab-pane" id="styles"></style-list>

                <mca class="tab-pane" id="mca"></mca>

                <heatmap class="tab-pane" id="heatmap"></heatmap>

                <feature-list class="tab-pane" id="features"></feature-list>

                <legend-list class="tab-pane" id="legend"></legend-list>

                <project-settings class="tab-pane" id="settings"></project-settings>
            </div>
        </div>
    </div>
</div>